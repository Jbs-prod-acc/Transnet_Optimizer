<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transnet Freight Rail Dashboard</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="CSS/style.css">
  <style>
    .draggable-field {
      background-color: #f8f9fa;
      cursor: move;
    }
  
    #inputFieldsContainer, #selectedFieldsContainer {
      min-height: 200px;
      background-color: #e9ecef;
    }
  </style>
  
</head>

<body>

  <header class="navbar navbar-expand-lg bg-white shadow-sm px-4 py-2">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="IMAGES/Transnet-Logo.png" alt="Transnet Logo" style="height: 50px; margin-right: 15px;">
      <span class="fw-bold text-dark text-uppercase fs-5" style="line-height: 1.2;">Transnet<br>Freight Rail</span>
    </a>

    <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTopMenu"
      aria-controls="navbarTopMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarTopMenu">
      <ul class="navbar-nav align-items-center">
        <li class="nav-item">
          <a class="nav-link text-dark fw-semibold" href="index.html"><i
              class="fas fa-chart-line me-1 text-dark"></i>Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="#"><i class="fas fa-cogs me-1"></i>Settings</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="DataRequest.html"><i class="fas fa-database me-1"></i>Data Request</a>
        </li>

        <li class="nav-item">
          <a class="nav-link text-dark" href="#"><i class="fas fa-user-circle me-1"></i>Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-danger fw-semibold" href="#"><i class="fas fa-sign-out-alt me-1"></i>Logout</a>
        </li>
      </ul>
    </div>
  </header>





  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-12 col-md-2 sidebar p-3">
       <h5 style="color: rgb(145, 145, 6); text-align: center;">Transnet Freight Rail</h5>


        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu1" role="button" aria-expanded="false"
              aria-controls="submenu1">
              Route Optimization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu1">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="RouteOptimization.html" class="nav-link">Route Optimization</a></li>
                <li class="nav-item"><a href="CargoDistributionOptimization.html" class="nav-link">Cargo
                    Distribution</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu2" role="button" aria-expanded="false"
              aria-controls="submenu2">
              Fuel & Emissions Optimization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu2">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="FuelEmissionFuelandWasteOptimimization.html" class="nav-link">Fuel Waste
                    Patterns Optimization</a></li>
                <li class="nav-item"><a href="FuelEmissionCargoDistribution.html" class="nav-link">Cargo Distribution
                    Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu3" role="button" aria-expanded="false"
              aria-controls="submenu3">
              Crew Scheduling Optimization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu3">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Shift Pattern Optimization</a></li>
                <li class="nav-item"><a href="#" class="nav-link">Staff Rotation Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu4" role="button" aria-expanded="false"
              aria-controls="submenu4">
              Asset Utilization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu4">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Underused Locomotive Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu5" role="button" aria-expanded="false"
              aria-controls="submenu5">
              Yard Congestion Management <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu5">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Yard Overflow Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu6" role="button" aria-expanded="false"
              aria-controls="submenu6">
              Maintenance Slot Optimization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu6">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Asset Maintenance Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu7" role="button" aria-expanded="false"
              aria-controls="submenu7">
              Security Route Optimization <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu7">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Safe Corridor Optimization</a></li>
                <li class="nav-item"><a href="#" class="nav-link">Time-of-delay Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu8" role="button" aria-expanded="false"
              aria-controls="submenu8">
              Turnaround Time Reduction <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu8">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Choke points Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu9" role="button" aria-expanded="false"
              aria-controls="submenu9">
              Revenue vs Cost Pathing <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu9">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Compares Route Profitability</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu10" role="button" aria-expanded="false"
              aria-controls="submenu10">
              Project Prioritization Suggestions <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu10">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Infrastructure Projects Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <ul class="nav flex-column mt-3">
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#submenu11" role="button" aria-expanded="false"
              aria-controls="submenu11">
              Cross-BU Synergy Identification <i class="fas fa-chevron-down float-end"></i>
            </a>
            <div class="collapse ps-3" id="submenu11">
              <ul class="nav flex-column">
                <li class="nav-item"><a href="#" class="nav-link">Cross-BU Opportunity Optimization</a></li>
                <li class="nav-item"><a href="#" class="nav-link">Cross-BU Sharing Optimization</a></li>
              </ul>
            </div>
          </li>
        </ul>

        <div class="mt-4">
          <label>Yard Type:</label>
          <select class="form-select">
            <option>Bulk</option>
          </select>
        </div>

        <div class="mt-3">
          <label>Area Filter:</label>
          <select class="form-select">
            <option>Departure Yard</option>
          </select>
        </div>
      </div>


      <!-- Main content -->
      <div class="col-md-10 content">

        <h3 class="dashboard-heading">
          <i class="fas fa-sliders-h me-2 text-success"></i> OPTIMIZATION DASHBOARD | DATA REQUEST
        </h3>

        <div class="mb-4">
          <label for="fromDate" class="form-label fw-bold">From:</label>
          <input type="date" id="fromDate" name="fromDate" class="form-control">
        </div>
        
        <div class="mb-4">
          <label for="toDate" class="form-label fw-bold">To:</label>
          <input type="date" id="toDate" name="toDate" class="form-control">
        </div>
        


        <!-- Category Selection Dropdown -->
        <div class="mb-4">
          <label for="categorySelect" class="form-label fw-bold">Select Category:</label>
          <select id="categorySelect" class="form-select">
            <option value="">-- Choose a Category --</option>
            <option value="routeOpt">Route Optimization (Route Optimization)</option>
            <option value="cargoDist">Route Optimization (Cargo Distribution)</option>
            <option value="fuelWaste">Fuel & Emissions (Fuel Waste Pattern)</option>
            <option value="fuelCargo">Fuel & Emissions (Cargo Distribution)</option>
          </select>
        </div>

        <!-- Input Fields Container -->
        <div class="row align-items-start">
          <!-- Available Fields -->
          <div class="col-md-6">
            <div class="border rounded p-3 bg-light d-flex flex-column h-100">
              <h5>Available Fields</h5>
              <em class="mb-2">Drag From this box</em>
        
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="selectAllCheckbox" onchange="toggleSelectAll(this)">
                <label class="form-check-label fw-bold" for="selectAllCheckbox">Select All</label>
              </div>
        
              <ul id="availableFields" class="list-group flex-grow-1 mb-3 border" style="min-height: 200px;" ondragover="allowDrop(event)" ondrop="drop(event, 'availableFields')">
                <!-- Populated dynamically -->
              </ul>
        
              <button class="btn btn-sm btn-outline-secondary mt-auto" onclick="dragSelected()">Drag Selected</button>
            </div>
          </div>
        
          <!-- Selected Fields -->
          <div class="col-md-6">
            <div class="border rounded p-3 bg-light d-flex flex-column h-100">
              <h5>Selected Fields</h5>
              <em class="mb-2">Paste into this box</em>
              <div class="form-check mb-2">
                <input class="form-check-input" type="checkbox" id="unselectAllCheckbox" onchange="unselectAll(this)">

                <label class="form-check-label fw-bold" for="selectAllCheckbox">Unselect All</label>
              </div>
              <ul id="selectedFields" class="list-group flex-grow-1 border" style="min-height: 200px;" ondragover="allowDrop(event)" ondrop="drop(event, 'selectedFields')">
                <!-- User-selected fields will appear here -->
              </ul>
            </div>
          </div>
        </div>
        
        

            <!-- Optimization Button -->
            <div class="text-center mt-4 mb-5">
              <button class="btn btn-lg btn-secondary px-5 py-2 shadow-sm" type="button">
                <i class="fas fa-database me-2"></i>Submit Data Request to BI Administrator
              </button>
            </div>
            






        <br>


      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- ✅ FIXED VERSION -->
<script>
  const categoryFields = {
    routeOpt: [
      'Start Point', 'Destination', 'Corridor Capacity', 'Congestion Level',
      'Route Length', 'Track Condition', 'Speed Limit', 'Clearance Restrictions',
      'Locomotive Availability', 'Wagon Type Availability', 'Shunting Locomotive',
      'Crew Availability', 'Fuel Efficiency', 'Refueling Station Access',
      'Estimated Travel Time', 'Dwel Time Per Yard', 'Expected Turnaround Time',
      'Historical Delay Probability', 'Load Type', 'Total load Tons', 'Axle Load Limits',
      'Wagon utilization', 'Client Delievry Window', 'Weather Impact Forecast'
    ],
    cargoDist: [
      'Cargo Type', 'Cargo Volume', 'Cargo Weight', 'Special Handling Requirements',
      'Preffered Route Corridor', 'Transhipment Required', 'Delievry Node', 'Receiving Facility',
      'Daily Demands', 'Demand Peak Hours', 'Wagon Availability', 'Crane/Loader Units available',
      'Manpower Allocation', 'Weather Delay Risk'
    ],
    fuelWaste: [
      'Daily Fuel Consumption', 'Fuel Cost Per litre', 'Average load Per Trip',
      'Fuel Efficiency', 'Shunting Time Fuel Use', 'Fuel Type', 'CO2 Emmision Per Trip',
      'NO2 Emmission pmm', 'Idle Time Emmision', 'Emmision Compliance',
      'Emmision Monitoring Technology Used'
    ],
    fuelCargo: [
      'Fuel Consumed (Litres)', 'Distance Travelled', 'Average Speed',
      'Engine Type', 'Co2 Emitted (grams)', 'NO2 Emitted (grams)',
      'Particular Matter', 'Emission Standard'
    ]
  };

  document.getElementById('categorySelect').addEventListener('change', function () {
    const selectedCategory = this.value;
    const availableFields = document.getElementById('availableFields');
    const selectedFields = document.getElementById('selectedFields');

    availableFields.innerHTML = '';
    selectedFields.innerHTML = '';

    if (categoryFields[selectedCategory]) {
      categoryFields[selectedCategory].forEach((field, index) => {
        const listItem = document.createElement('li');
        listItem.className = 'list-group-item d-flex justify-content-between align-items-center';
        listItem.id = `field-${field.replace(/\s+/g, '-')}-${index}`;
        listItem.draggable = true;
        listItem.addEventListener('dragstart', drag);

        const labelSpan = document.createElement('span');
        labelSpan.textContent = field;

        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'form-check-input ms-2';
        checkbox.dataset.fieldName = field;

        listItem.appendChild(labelSpan);
        listItem.appendChild(checkbox);
        availableFields.appendChild(listItem);
      });
    }
  });

  function allowDrop(ev) {
    ev.preventDefault();
  }

  function drag(ev) {
    ev.dataTransfer.setData('text', ev.target.id);
  }

  function drop(ev, targetId) {
    ev.preventDefault();
    const data = ev.dataTransfer.getData('text');
    const draggedElement = document.getElementById(data);
    const targetList = document.getElementById(targetId);

    if (!Array.from(targetList.children).some(item => item.textContent.trim() === draggedElement.textContent.trim())) {
      const clonedElement = draggedElement.cloneNode(true);
      const checkbox = clonedElement.querySelector('input[type="checkbox"]');
      if (checkbox) checkbox.remove();
      clonedElement.addEventListener('dragstart', drag);
      targetList.appendChild(clonedElement);
    }
  }

  function toggleSelectAll(checkbox) {
    const allCheckboxes = document.querySelectorAll('#availableFields input[type="checkbox"]');
    allCheckboxes.forEach(cb => {
      cb.checked = checkbox.checked;
    });
  }
  function unselectAll(checkbox) {
  const selectedFields = document.getElementById('selectedFields');
  if (checkbox.checked) {
    selectedFields.innerHTML = ''; // Clear all selected items
    checkbox.checked = false; // Immediately uncheck to avoid confusion
  }
}


  function dragSelected() {
    const checkboxes = document.querySelectorAll('#availableFields input[type="checkbox"]:checked');
    const selectedFields = document.getElementById('selectedFields');

    checkboxes.forEach(cb => {
      const fieldName = cb.dataset.fieldName;
      const originalLi = cb.closest('li');

      if (!originalLi || !fieldName) return;

      const exists = Array.from(selectedFields.children).some(el =>
        el.textContent.trim().startsWith(fieldName)
      );

      if (!exists) {
        const cloned = originalLi.cloneNode(true);
        const checkbox = cloned.querySelector('input[type="checkbox"]');
        if (checkbox) checkbox.remove();
        cloned.id = `${originalLi.id}-cloned-${Date.now()}`;
        cloned.addEventListener('dragstart', drag);
        selectedFields.appendChild(cloned);
      }
    });
  }
</script>

  



</body>


<footer class="bg-dark text-white text-center text-md-start mt-5">
  <div class="container p-4">
    <div class="row">
      <!-- Left column -->
      <div class="col-md-6 mb-4 mb-md-0">
        <h5 class="text-uppercase">Transnet Freight Rail</h5>
        <p>
          This dashboard is designed to optimize rail freight operations, ensure efficiency, and track performance
          across multiple operational areas.
        </p>
      </div>

      <!-- Right column -->
      <div class="col-md-6 mb-4 mb-md-0 text-md-end">
        <h5 class="text-uppercase">Contact & Support</h5>
        <ul class="list-unstyled">
          <li>Email: <a href="mailto:support@transnetfreight.co.za" class="text-white">support@transnetfreight.co.za</a>
          </li>
          <li>Phone: +27 11 123 4567</li>
          <li>Operating Hours: Mon–Fri, 08:00–17:00</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="text-center p-3 bg-secondary">
    &copy; 2025 Transnet Freight Rail. All rights reserved.
  </div>
</footer>


</html>